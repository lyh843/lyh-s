检测当前台面状态
if 和牌 == 国士无双、七对子、四面子一对子
    && ！振听（只考虑舍牌振听）
{
    检查满足的役种
    {
        记录下当前所满足的役种
        （役种有替代性：满足两杯口，则没有一杯口和七对子）
        牌型有多种组合方式，选择番数最高的
        并包含 役满 和 两倍役种
        if 有役
        {
            计算最高符数（国士无双不需要）
                符数有多种结果，取最高值
                并按照符数规则向上向整十数取整
            {
                计算点数
                    根据 役种 和 宝牌情况（宝牌、里宝牌、赤宝牌） 计算番数
                    根据 番数 符数 场供情况（立直棒数、本场棒数）计算三家付给自家的点数
                    计算结束后进入终止
                    返回“和牌结算”状态
            }
        }
        else 无役
        {
            function 计算面听数
                可以通过哪几张牌和牌？
                只需得到面听数
                进入终止状态
                返回“听牌不和”状态
        }
    }
}
else 
{
    检测是否听牌
    if 听牌（虚听不算听）
    {
        function 计算面听数
            可以通过哪几张牌和牌？
                只需得到面听数
                进入终止状态
                返回“听牌不和”状态
    }
    else
    {
        计算向听数：
        {
            满足听牌类型最少需要替换掉几张牌？
            向听数最大为6，因为七对子听牌
            返回"不听牌"状态
        }
    }
}